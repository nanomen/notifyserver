<html>
<head>
    <title>Test socket.io</title>
    <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
</head>
<body>
  <div>
    Time: <span id="timeRoot"></span>
    <br>
    <button id="btn">получить время 2</button>
    <br>
    <input type="text" id="input">
    <br>
    <button id="inputBtn">тправить смс</button>
    <br>
    <div id="inputRoot"></div>
  </div>
<script>
  var socket = io('https://cryptic-coast-56094.herokuapp.com/'),
      timeRootEl = document.getElementById('timeRoot'),
      btnEl = document.getElementById('btn'),
      inputBtnEl = document.getElementById('inputBtn'),
      inputEl = document.getElementById('input');

  socket.on('connect', function(){
    console.log('connect');
  });

  socket.on('disconnect', function(){
    console.log('disconnect');
  });

  socket.on('settime', function (timeString) {
    console.log('settime');
    timeRootEl.innerHTML = timeString;
  });

  socket.on('setmsg', function (data) {
    var div = document.createElement('div');
    div.innerHTML = data.msg;
    inputRoot.appendChild(div);

    sendNotification(data.msg, {
      body: 'тело сообщения'
    });
  });

  btnEl.addEventListener('click', function(e){
    socket.emit('gettime');
  }, false);

  inputBtnEl.addEventListener('click', function(e){
    socket.emit('sendmsg', {
      msg: inputEl.value
    });
  }, false);

function sendNotification(title, options) {

  var notify = null;

  // Проверим, поддерживает ли браузер HTML5 Notifications
  if ("Notification" in window) {

    if (Notification.permission === "granted") {

      notify = new Notification(title, options);

    } else if (Notification.permission !== 'denied') {

      Notification.requestPermission(function(permission) {
        if (permission === "granted") {
          notify = new Notification(title, options);
        } else {
          console.log('Вы запретили показывать уведомления');
        }
      });

    }

  }

  if (!!notify) {
    setTimeout(notify.close.bind(notify), 4000);
  }

}
</script>
</body>
</html>